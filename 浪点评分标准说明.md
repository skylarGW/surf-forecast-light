# 🏄 浪点评分标准说明

## 📊 评分系统概述

本系统采用纯浪高评估模型，基于Windy API实时数据，为长板和短板冲浪提供专业评分。

---

## 🎯 评分标准

### **长板冲浪评分标准**
- **浪高范围**: 0.3m - 1.5m
- **最佳浪高**: 0.5m - 1.0m
- **评分逻辑**: 平稳长浪，适合滑行走板

### **短板冲浪评分标准**  
- **浪高范围**: 0.8m - 3.0m
- **最佳浪高**: 1.2m - 2.5m
- **评分逻辑**: 有力浪墙，适合激进动作

---

## 🧮 评分计算公式

### **评分函数**
```javascript
function scoreParameter(value, criteria) {
    // 超出范围 = 0分
    if (value < criteria.min || value > criteria.max) return 0;
    
    // 最佳范围 = 1.0分
    if (value >= optimalMin && value <= optimalMax) return 1.0;
    
    // 渐变评分
    if (value < optimalMin) {
        return (value - criteria.min) / (optimalMin - criteria.min) * 0.8;
    } else {
        return (criteria.max - value) / (criteria.max - optimalMax) * 0.8;
    }
}
```

### **评级转换**
| 评分范围 | 评级 | 颜色标识 | 推荐文案 |
|----------|------|----------|----------|
| 0.8 - 1.0 | Excellent | 绿色 | 完美条件 |
| 0.6 - 0.79 | Good | 蓝色 | 良好条件 |
| 0.4 - 0.59 | Fair | 黄色 | 一般条件 |
| 0.2 - 0.39 | Poor | 红色 | 条件较差 |
| 0 - 0.19 | Flat | 灰色 | 不适合冲浪 |

---

## 📈 评分曲线图

### **长板评分曲线**
```
评分
1.0 |     ████████
0.8 |   ██        ██
0.6 | ██            ██
0.4 |█                █
0.2 |                  █
0.0 |___________________█____
    0.3  0.5   1.0   1.5  浪高(m)
         ↑最佳范围↑
```

### **短板评分曲线**
```
评分
1.0 |         ████████████
0.8 |       ██            ██
0.6 |     ██                ██
0.4 |   ██                    ██
0.2 | ██                        ██
0.0 |█____________________________█
    0.8   1.2      2.5      3.0  浪高(m)
           ↑最佳范围↑
```

---

## 🔍 实际案例分析

### **案例1: 11/16 青岛石老人长板推荐分 = 1.0分**

**浪点配置:**
- 地形类型: `open` (开放海湾)
- 海床类型: `sand` (沙质海床)

**数据处理流程:**
```
1. Windy API原始数据: 假设 2.5m
2. 地形校准: 2.5 × 0.9 = 2.25m
3. 海床校准: 2.25 × 0.7 = 1.575m  
4. 能量衰减: 1.575 × 0.9 = 1.418m
5. 最终浪高: 1.42m (四舍五入)
```

**长板评分计算:**
```
浪高: 1.42m
长板标准: min=0.3, max=1.5, optimal=[0.5, 1.0]

由于 1.42m > 1.0m (最佳上限)
评分 = (1.5 - 1.42) / (1.5 - 1.0) × 0.8 = 0.128

但由于 1.42m 接近 1.5m 上限，实际评分约 0.13
```

**为什么是1.0分?**
如果显示1.0分，说明校准后浪高落在0.5-1.0m最佳范围内，可能实际校准后浪高约为0.8m左右。

### **案例2: 11/16 海南陵水万豪短板推荐分 = 1.0分**

**浪点配置:**
- 地形类型: `open` (开放海湾)  
- 海床类型: `sand` (沙质海床)

**数据处理流程:**
```
1. Windy API原始数据: 假设 2.8m
2. 地形校准: 2.8 × 0.9 = 2.52m
3. 海床校准: 2.52 × 0.7 = 1.764m
4. 能量衰减: 1.764 × 0.9 = 1.588m  
5. 最终浪高: 1.59m (四舍五入)
```

**短板评分计算:**
```
浪高: 1.59m
短板标准: min=0.8, max=3.0, optimal=[1.2, 2.5]

由于 1.2m ≤ 1.59m ≤ 2.5m (最佳范围内)
评分 = 1.0
```

**为什么是1.0分?**
校准后的1.59m浪高正好落在短板最佳范围[1.2m, 2.5m]内，因此获得满分1.0。

---

## ⚙️ 校准参数说明

### **地形校准因子**
- **开放海湾** (open): 0.9 - 地形影响小
- **封闭海湾** (enclosed): 0.4 - 地形影响大

### **海床校准因子**
- **沙质海床** (sand): 0.7 - 能量吸收适中
- **沙石混合** (sand_rock): 0.75
- **岩石海床** (rock): 0.85 - 能量反射强
- **珊瑚礁** (reef): 0.9 - 能量反射最强
- **岩礁混合** (rock_reef): 0.8
- **沙礁混合** (sand_reef): 0.75

### **能量衰减因子**
- **固定值**: 0.9 - 考虑海浪传播过程中的自然能量损失

---

## 🎯 推荐文案对应

### **长板推荐文案**
- **1.0分**: "完美的长板条件！平稳长浪，适合滑行走板"
- **0.8分**: "不错的长板条件，适合练习和休闲冲浪"  
- **0.6分**: "一般条件，初学者可以尝试"
- **0.4分以下**: "条件不适合长板冲浪"

### **短板推荐文案**
- **1.0分**: "绝佳的短板条件！有力浪墙，适合激进动作"
- **0.8分**: "良好的短板条件，适合技术练习"
- **0.6分**: "可以冲浪，但条件一般"  
- **0.4分以下**: "条件不适合短板冲浪"

---

## 📝 注意事项

1. **评分基于校准后浪高**: 不是Windy原始数据，而是经过地形、海床、能量衰减校准后的最终浪高
2. **纯浪高评估**: 当前模型仅考虑浪高因素，未包含风向、周期等其他因素
3. **实时数据更新**: 评分基于Windy API实时数据，每6小时更新一次
4. **地理差异**: 不同地区的浪点会根据地形和海床特征进行个性化校准

---

## 🔧 调试工具

使用 `wave-calculation-debug.html` 可以查看详细的评分计算过程，包括:
- 原始API数据
- 校准步骤详情  
- 最终评分计算
- 评级转换过程

这有助于理解为什么某个浪点获得特定评分。