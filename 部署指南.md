# 🚀 公开发布部署指南

## 1. 真实数据接入方案

### 架构设计
```
用户浏览器 → GitHub Pages → Vercel Functions → Windy API
```

### 优势
- ✅ API Key完全隐藏在服务端
- ✅ 支持CORS跨域访问
- ✅ 自动缓存减少API调用
- ✅ 降级机制保证可用性

## 2. 部署步骤

### 步骤1: 申请Windy API Key
1. 访问 https://api.windy.com/
2. 注册账户并申请API密钥
3. 选择合适的定价计划

### 步骤2: 部署到Vercel
```bash
# 1. 安装Vercel CLI
npm i -g vercel

# 2. 登录Vercel
vercel login

# 3. 部署项目
vercel --prod

# 4. 设置环境变量
vercel env add WINDY_API_KEY
```

### 步骤3: 配置GitHub Pages
1. 推送代码到GitHub仓库
2. 启用GitHub Pages
3. 更新前端API端点为Vercel域名

### 步骤4: 域名配置（可选）
```bash
# 绑定自定义域名
vercel domains add your-domain.com
```

## 3. 安全配置

### 环境变量设置
```bash
# Vercel环境变量
WINDY_API_KEY=your_actual_api_key
NODE_ENV=production
```

### API限流配置
```javascript
// 在windy-proxy.js中添加
const rateLimit = {
  windowMs: 15 * 60 * 1000, // 15分钟
  max: 100 // 最多100次请求
};
```

## 4. 监控与维护

### 错误监控
- 使用Vercel Analytics监控API调用
- 设置错误告警通知
- 定期检查API配额使用情况

### 性能优化
- 启用CDN缓存
- 压缩静态资源
- 优化图片加载

## 5. 成本估算

### Windy API费用
- 免费额度：1000次/月
- 付费计划：$29/月起

### Vercel费用
- Hobby计划：免费
- Pro计划：$20/月（如需更高性能）

### 总成本
- 基础版：$29/月
- 专业版：$49/月

## 6. 备用方案

### 方案A: 使用免费API
- OpenWeatherMap Marine API
- NOAA海洋数据API
- 精度可能较低

### 方案B: 数据爬取
- 定时爬取公开海洋数据
- 需要处理反爬虫机制
- 法律风险需要评估